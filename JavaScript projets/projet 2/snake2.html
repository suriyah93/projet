 <canvas id="gc" width="600" height="600"></canvas>
<script>
window.onload=function() {
 canv=document.getElementById("gc");
 ctx=canv.getContext("2d");
 document.addEventListener("keydown",keyPush);
 setInterval(game,1000/10);
 setInterval(superblocks,2000);
}
px=py=13;
gs=20;
tc=30;
ax=Math.floor(Math.random()*tc);
ay=Math.floor(Math.random()*tc);
apx=Math.floor(Math.random()*tc);
apy=Math.floor(Math.random()*tc);
porx=Math.floor(Math.random()*tc);
pory=Math.floor(Math.random()*tc);
sx=Math.floor(Math.random()*tc);
sy=Math.floor(Math.random()*tc);
ox=Math.floor(Math.random()*tc);
oy=Math.floor(Math.random()*tc);
obx=Math.floor(Math.random()*tc);
oby=Math.floor(Math.random()*tc);
obsx=Math.floor(Math.random()*tc);
obsy=Math.floor(Math.random()*tc);
obstx=Math.floor(Math.random()*tc);
obsty=Math.floor(Math.random()*tc);
score=0;
scoreten=false;
xv=yv=0;
trail=[];
tail = 4;
function game() {
 px+=xv;
 py+=yv;
 if(px<0) {
  px= tc-1;
 }
 if(px>tc-1) {
  px= 0;
 }
 if(py<0) {
  py= tc-1;
 }
 if(py>tc-1) {
  py= 0;
 }

 document.getElementById("score").innerHTML ="Score: " + score;
 document.getElementById("score").style.font = "bold 30px arial"

 ctx.fillStyle="green";
 ctx.fillRect(0,0,canv.width,canv.height);

 ctx.fillStyle="lime";
 for(var i=0;i<trail.length;i++) {
  ctx.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
  if(trail[i].x==px && trail[i].y==py) {
   tail = 4;
   xv=0;yv=0;
   px=13;py=13;
   scoreten=false;
  }
 }
 trail.push({x:px,y:py});
 while(trail.length>tail) {
 trail.shift();
 }
 if(ax==px && ay==py) {
  tail++;
  score++;
  ax=Math.floor(Math.random()*tc);
  ay=Math.floor(Math.random()*tc);
 }
 if(apx==px && apy==py) {
  tail++;
  score++;
  apx=Math.floor(Math.random()*tc);
  apy=Math.floor(Math.random()*tc);
 }
 ctx.fillStyle="red";
 ctx.fillRect(ax*gs,ay*gs,gs-2,gs-2);

 ctx.fillStyle="red";
 ctx.fillRect(apx*gs,apy*gs,gs-2,gs-2);

 if (px==porx && py==pory) {
  px=Math.floor(Math.random()*tc);
  py=Math.floor(Math.random()*tc);
  porx=Math.floor(Math.random()*tc);
  pory=Math.floor(Math.random()*tc);
 }

 ctx.fillStyle="white";
 ctx.fillRect(porx*gs,pory*gs,gs-2,gs-2);

 ctx.fillStyle="darkslategray";
 ctx.fillRect(ox*gs,oy*gs,gs-2,gs-2);

 ctx.fillStyle="darkslategray";
 ctx.fillRect(obx*gs,oby*gs,gs-2,gs-2);

 ctx.fillStyle="darkslategray";
 ctx.fillRect(obstx*gs,obsty*gs,gs-2,gs-2);

 ctx.fillStyle="darkslategray";
 ctx.fillRect(obsx*gs,obsy*gs,gs-2,gs-2);

 ctx.fillStyle="gold";
 ctx.fillRect(sx*gs,sy*gs,gs-2,gs-2);

 if(px==sx && py==sy) {
  tail++;
  tail++;
  score++;
  score++;
  sx=Math.floor(Math.random()*tc);
  sy=Math.floor(Math.random()*tc);
 }

 if(px==ox && py==oy) {
  tail = 4;
  xv=0;yv=0;
  px=py=13;
 }
 if(px==obsx && py==obsy) {
  tail = 4;
  xv=0;yv=0;
  px=py=13;
 }
 if(px==obx && py==oby) {
  tail = 4;
  xv=0;yv=0;
  px=py=13;
 }
 if(px==obstx && py==obsty) {
  tail = 4;
  xv=0;yv=0;
  px=py=13;
 }

}
function keyPush(evt) {
 switch(evt.keyCode) {
  case 37:
   if(xv==0 && yv==0) {
    score=0;
   }
   xv=-1;yv=0;
   break;
  case 38:
   if(xv==0 && yv==0) {
    score=0;
   }
   xv=0;yv=-1;
   break;
  case 39:
   if(xv==0 && yv==0) {
    score=0;
   }
   xv=1;yv=0;
   break;
  case 40:
   if(xv==0 && yv==0) {
    score=0;
   }
   xv=0;yv=1;
   break;
 }
}
function superblocks() {

 sx=Math.floor(Math.random()*tc);
 sy=Math.floor(Math.random()*tc);

}
</script>
<p id="score"></p>